"use strict";var ApplicationConfiguration=function(){var applicationModuleName="site-salle",applicationModuleVendorDependencies=["angular-json-editor","angulartics","angulartics.google.analytics","google-maps","ngResource","ngCookies","ngAnimate","ngTouch","ngSanitize","pascalprecht.translate","textAngular","ui.router","ui.bootstrap","ui.utils"],registerModule=function(moduleName,dependencies){angular.module(moduleName,dependencies||[]),angular.module(applicationModuleName).requires.push(moduleName)};return{applicationModuleName:applicationModuleName,applicationModuleVendorDependencies:applicationModuleVendorDependencies,registerModule:registerModule}}();angular.module(ApplicationConfiguration.applicationModuleName,ApplicationConfiguration.applicationModuleVendorDependencies),angular.module(ApplicationConfiguration.applicationModuleName).config(["$locationProvider",function($locationProvider){$locationProvider.hashPrefix("!")}]),angular.module(ApplicationConfiguration.applicationModuleName).config(["$translateProvider",function($translateProvider){$translateProvider.useUrlLoader("api/translations"),$translateProvider.preferredLanguage("fr")}]),angular.element(document).ready(function(){"#_=_"===window.location.hash&&(window.location.hash="#!"),angular.bootstrap(document,[ApplicationConfiguration.applicationModuleName])}),ApplicationConfiguration.registerModule("activity"),ApplicationConfiguration.registerModule("admin"),ApplicationConfiguration.registerModule("coaching"),ApplicationConfiguration.registerModule("contact"),ApplicationConfiguration.registerModule("core"),ApplicationConfiguration.registerModule("osteopathy"),ApplicationConfiguration.registerModule("planning"),ApplicationConfiguration.registerModule("posts"),ApplicationConfiguration.registerModule("salle"),ApplicationConfiguration.registerModule("users"),angular.module("activity").config(["$stateProvider",function($stateProvider){$stateProvider.state("activity",{url:"/activites?name",templateUrl:"modules/activity/views/activity.client.view.html"}).state("activity.details",{url:"/activites/:category",templateUrl:"modules/activity/views/activity.client.view.html",controller:"ActivityController"})}]),angular.module("activity").controller("ActivityController",["$scope","$state","$window",function($scope,$state,$window){$scope.currentCategory=null,$scope.search={},$state.params.name&&($scope.search.name=$state.params.name),$scope.activities=[{name:"Stretching",duration:"15'",level:"easy",category:"Etirement / Détente / Renforcement",description:"C’est un cours basé sur l’enseignement des étirements musculaires afin d’optimiser la souplesse musculaire puis articulaire en favorisant le retour veineux et donc la récupération musculaire."},{name:"Gym douce",duration:"45'",level:"easy",category:"Etirement / Détente / Renforcement",description:"C’est un cours de renforcement musculaire adapté aux débutants, personnes âgées en convalescence... Ce cours permet aux personnes de se muscler tout en douceur afin de faciliter les mouvements du quotidien dans sa globalité."},{name:"Body Barre",duration:"45'",level:"medium",category:"Renfo",description:"C’est un cours de renforcement musculaire basé sur des exercices effectués à l’aide d’une barre lestée. Lors de ce type de cours tous les groupes musculaires sont travaillés pour permettre une fonte adipeuse (perte de graisse) et prise de masse musculaire sèche (permettant d’affiner la silhouette pour faire ressortir la musculature dite naturelle)."},{name:"Cross training",duration:"45'",level:"hard",category:"Renfo / Cardio",description:"C’est un cours inspiré du cross fit qui est très intense, spécialement conçu pour les personnes en quête de sensations fortes souhaitant se dépasser pour repousser les limites de leur propre corps. C’est un cours d’alternance cardio et renforcement très difficile."},{name:"H.I.I.T.",duration:"30'",level:"extreme",category:"Cardio",description:"Tous comme le boot camp et le cross fit, le H.I.I.T. est le plus difficile des cours de renforcement musculaire car les exercices cardios et renfo sont directement combinés entre eux afin de faire vivre à l’adhérent une séance très intense qui lui permettra d’obtenir de réels résultats visibles et rapides en seulement quelques séances."},{name:"Abdos fessiers",duration:"30'",level:"easy",category:"Renfo",description:"C’est un cours basé sur des exercices d’abdos et fessiers spécialement pensés pour les femmes."},{name:"Postural Shape",duration:"45'",level:"medium",category:"Etirement / Détente / Renforcement",description:"C’est un cours visant à renforcer les muscles profonds du corps et en particulier ceux proches de la colonne vertébrale."},{name:"Pilates",duration:"45'",level:"medium",category:"Etirement / Détente / Renforcement",description:"Cours de renforcement musculaire et d'étirement musculaire permettant de lutter contre les problèmes de scoliose, lumbago, sciatiques et hernies discales."},{name:"Body Sculpt",duration:"45'",level:"medium",category:"Renfo",description:"Cours basé sur le renforcement global du corps à l’aide d’haltères, élastiques, step... Ce cours permet de donner de nombreuses idées de renforcement aux adhérents se trouvant en déplacement loin du Magic Form."},{name:"C.A.F.",duration:"45'",level:"medium",category:"Renfo",description:"Cuisses, Abdos, Fessiers, c'est le cours collectif de référence des femmes car il travaille leur zones de prédilection."},{name:"Biking",duration:"45-60'",level:"hard",category:"Cardio",description:"Cours collectif visant à remplacer une course cycliste, très intense car le mode de travail est basé sur l’alternance de reproduction de montée de col, de sprint et de récupération... Le but est de développer le muscle cardiaque et la perte de graisse."},{name:"Total Body",duration:"45-60'",level:"hard",category:"Renfo / Cardio",description:"Ce type de cours est basé sur l’explosivité musculaire et la combustion maximum des graisses pour pouvoir supporter le rythme soutenu de ce type de cours où le corps est soumis à rude épreuve afin de se délester de son stress et de ses kilos en trop."},{name:"Zumba",duration:"45-60'",level:"meidum",category:"Cardio dance",description:"Cours de danse très accessible car peu de chorégraphie. Il permet de s’amuser facilement et de se délester de son stress."},{name:"Step",duration:"45'",level:"medium",category:"Cardio",description:"Cours aérobic s’effectuant sur un step qui permet à la fois de s’amuser tout en perdant de la masse graisseuse et en musclant le coeur."},{name:"Yoga",duration:"45'",level:"medium",category:"Etirement / Détente / Renforcement",description:"C’est une discipline du corps et de l’esprit qui comprend une grande variété d’exercices et de techniques. Les techniques employées utilisent des postures physiques (appelées asanas), des pratiques respiratoires (pranayama) et de méditation, ainsi que la relaxation profonde (yoga nidra)."},{name:"Abdos Flash",duration:"45'",level:"medium",category:"Renfo",description:"En mettant l’accent sur le travail des abdominaux aussi bien profonds que superficiels, vous allez retrouver un bon gainage abdominale et par conséquent, un ventre plat ! Simple, rapide et efficace."},{name:"Body Zen",duration:"15'",level:"medium",category:"Etirement / Détente / Renforcement",description:"Body Zen Associe des exercices de yoga, de tai chi et de Pilates pour acquérir force et flexibilité, centration et calme. La respiration contrôlée, la concentration et une série structurée avec soin d'étirements, de mouvements et de postures, associés à des musiques savamment choisies, contribuent à créer un entraînement holistique qui plonge votre corps dans un état d'harmonie et d'équilibre."},{name:"BP Fighting",duration:"15'",level:"hard",category:"Cardio",description:"Cours de fitness avec jeux d'opposition de forte intensité basé sur des mouvements d'arts martiaux et sports de combat divers. Cet entrainement complet permet un travail cardio vasculaire et musculaire."},{name:"Cardio Fit Boxing",duration:"15'",level:"hard",category:"Renfo / Cardio",description:"Fusion harmonieuse du karaté-fitness et de la boxe training sans contact, un entrainement complet du corps."},{name:"Djembel",duration:"15'",level:"medium",category:"Cardio dance",description:"Danse de bien-être basée sur les sonorités, la gestuelle et les mouvements issus des danses africaines"}],$scope.categories=$window._.chain($scope.activities).pluck("category").uniq().sortBy().value()}]),angular.module("activity").directive("levelIcon",["$window",function($window){return{restrict:"EA",scope:{size:"@",level:"@"},template:'<div data-ng-include="\'modules/activity/views/level-icon.view.svg\'" class="level-icon" data-ng-class="level"></div>',link:function($scope,$element,$attr){}}}]),angular.module("admin").config(["$stateProvider",function($stateProvider){$stateProvider.state("admin",{url:"/admin",templateUrl:"modules/admin/views/admin.client.view.html"})}]),angular.module("admin").controller("AdminController",["$scope","$http",function($scope,$http){$scope.mySchema={type:"object",title:"Traductions",required:!0,properties:{address:{type:"object",title:"Adresse",required:!0,properties:{header:{type:"string",title:"Label de l'adresse",required:!0},city:{type:"string",title:"Ville",required:!0},line1:{type:"string",title:"Ligne1",required:!0},line2:{type:"string",title:"Ligne2",required:!0}}},brand:{type:"string",title:"Nom de la marque",required:!0},contact:{type:"object",title:"Contact",required:!0,properties:{header:{type:"string",title:"Label",required:!0},phone:{type:"string",title:"Téléphone",required:!0},email:{type:"string",title:"Email",required:!0}}},header:{type:"object",title:"Barre de navigation",required:!0,properties:{salle:{type:"string",title:"Salle",required:!0},activities:{type:"string",title:"Activités",required:!0},schedule:{type:"string",title:"Planning",required:!0},coaching:{type:"string",title:"Coaching",required:!0},osteopathy:{type:"string",title:"Ostéopathie",required:!0},contact:{type:"string",title:"Accès",required:!0}}},home:{type:"object",title:"Page d'accueil",required:!0,properties:{callToAction:{type:"string",title:"Bouton principal",required:!0}}},schedule:{type:"object",title:"Planning - accueil",required:!0,properties:{header:{type:"string",title:"Label",required:!0},1:{type:"object",title:"Jour 1",required:!0,properties:{name:{type:"string",title:"Nom",required:!0},start:{type:"integer",title:"Heure de début",required:!0},end:{type:"integer",title:"Heure de fin",required:!0},hour:{type:"string",title:"Horaires",required:!0}}},2:{type:"object",title:"Jour 2",required:!0,properties:{name:{type:"string",title:"Nom",required:!0},start:{type:"integer",title:"Heure de début",required:!0},end:{type:"integer",title:"Heure de fin",required:!0},hour:{type:"string",title:"Horaires",required:!0}}},3:{type:"object",title:"Jour 3",required:!0,properties:{name:{type:"string",title:"Nom",required:!0},start:{type:"integer",title:"Heure de début",required:!0},end:{type:"integer",title:"Heure de fin",required:!0},hour:{type:"string",title:"Horaires",required:!0}}},4:{type:"object",title:"Jour 4",required:!0,properties:{name:{type:"string",title:"Nom",required:!0},start:{type:"integer",title:"Heure de début",required:!0},end:{type:"integer",title:"Heure de fin",required:!0},hour:{type:"string",title:"Horaires",required:!0}}},5:{type:"object",title:"Jour 5",required:!0,properties:{name:{type:"string",title:"Nom",required:!0},start:{type:"integer",title:"Heure de début",required:!0},end:{type:"integer",title:"Heure de fin",required:!0},hour:{type:"string",title:"Horaires",required:!0}}},6:{type:"object",title:"Jour 6",required:!0,properties:{name:{type:"string",title:"Nom",required:!0},start:{type:"integer",title:"Heure de début",required:!0},end:{type:"integer",title:"Heure de fin",required:!0},hour:{type:"string",title:"Horaires",required:!0}}},7:{type:"object",title:"Jour 7",required:!0,properties:{name:{type:"string",title:"Nom",required:!0},start:{type:"integer",title:"Heure de début",required:!0},end:{type:"integer",title:"Heure de fin",required:!0},hour:{type:"string",title:"Horaires",required:!0}}}}}}},$http.get("/api/translations").then(function(response){$scope.translations=response.data}),$http.get("/api/planning").then(function(response){$scope.planning=response.data})}]).controller("AsyncButtonsController",function($scope,$http){$scope.onSubmit=function($event,type){console.log("onSubmit data in async controller",$scope.editor.getValue());var payload=$scope.editor.getValue();$http.post("/api/"+type,payload).then(function(response){})}}),angular.module("coaching").config(["$stateProvider",function($stateProvider){$stateProvider.state("coaching",{url:"/coaching",templateUrl:"modules/coaching/views/coaching.client.view.html"})}]),angular.module("coaching").controller("CoachingController",["$scope",function($scope){}]),angular.module("contact").config(["$stateProvider",function($stateProvider){$stateProvider.state("contact",{url:"/contact",templateUrl:"modules/contact/views/contact.client.view.html"})}]),angular.module("contact").controller("ContactController",["$scope",function($scope){$scope.map={center:{latitude:48.7897294,longitude:2.2859919},zoom:16},$scope.salle={id:1,coords:{latitude:48.7905062,longitude:2.2846781}},$scope.transports=[{id:2,coords:{latitude:48.78728,longitude:2.293427},icon:"modules/contact/img/RER_B_small.png"},{id:3,coords:{latitude:48.79068,longitude:2.284141},icon:"modules/contact/img/194genRVB_small.png"},{id:4,coords:{latitude:48.791125,longitude:2.284769},icon:"modules/contact/img/394genRVB_small.png"}]}]),angular.module("core").config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/"),$stateProvider.state("home",{url:"/",templateUrl:"modules/core/views/home.client.view.html"})}]),angular.module("core").controller("FooterController",["$scope",function($scope){}]),angular.module("core").controller("HeaderController",["$scope","Authentication","Menus",function($scope,Authentication,Menus){$scope.authentication=Authentication,$scope.isCollapsed=!1,$scope.menu=Menus.getMenu("topbar"),$scope.toggleCollapsibleMenu=function(){$scope.isCollapsed=!$scope.isCollapsed},$scope.$on("$stateChangeSuccess",function(){$scope.isCollapsed=!1})}]),angular.module("core").controller("HomeController",["$scope","Authentication","$translate","Posts",function($scope,Authentication,$translate,Posts){$scope.authentication=Authentication,$scope.currentDay=(new Date).getDay(),$translate("contact.phone").then(function(phone){$scope.phone=phone}),$translate("contact.email").then(function(email){$scope.email=email}),$scope.posts=Posts.query({major:!0})}]),angular.module("core").service("Menus",[function(){this.defaultRoles=["*"],this.menus={};var shouldRender=function(user){if(!user)return this.isPublic;if(~this.roles.indexOf("*"))return!0;for(var userRoleIndex in user.roles)for(var roleIndex in this.roles)if(this.roles[roleIndex]===user.roles[userRoleIndex])return!0;return!1};this.validateMenuExistance=function(menuId){if(menuId&&menuId.length){if(this.menus[menuId])return!0;throw new Error("Menu does not exists")}throw new Error("MenuId was not provided")},this.getMenu=function(menuId){return this.validateMenuExistance(menuId),this.menus[menuId]},this.addMenu=function(menuId,isPublic,roles){return this.menus[menuId]={isPublic:isPublic||!1,roles:roles||this.defaultRoles,items:[],shouldRender:shouldRender},this.menus[menuId]},this.removeMenu=function(menuId){this.validateMenuExistance(menuId),delete this.menus[menuId]},this.addMenuItem=function(menuId,menuItemTitle,menuItemURL,menuItemType,menuItemUIRoute,isPublic,roles,position){return this.validateMenuExistance(menuId),this.menus[menuId].items.push({title:menuItemTitle,link:menuItemURL,menuItemType:menuItemType||"item",menuItemClass:menuItemType,uiRoute:menuItemUIRoute||"/"+menuItemURL,isPublic:null===isPublic||"undefined"==typeof isPublic?this.menus[menuId].isPublic:isPublic,roles:null===roles||"undefined"==typeof roles?this.menus[menuId].roles:roles,position:position||0,items:[],shouldRender:shouldRender}),this.menus[menuId]},this.addSubMenuItem=function(menuId,rootMenuItemURL,menuItemTitle,menuItemURL,menuItemUIRoute,isPublic,roles,position){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)this.menus[menuId].items[itemIndex].link===rootMenuItemURL&&this.menus[menuId].items[itemIndex].items.push({title:menuItemTitle,link:menuItemURL,uiRoute:menuItemUIRoute||"/"+menuItemURL,isPublic:null===isPublic||"undefined"==typeof isPublic?this.menus[menuId].items[itemIndex].isPublic:isPublic,roles:null===roles||"undefined"==typeof roles?this.menus[menuId].items[itemIndex].roles:roles,position:position||0,shouldRender:shouldRender});return this.menus[menuId]},this.removeMenuItem=function(menuId,menuItemURL){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)this.menus[menuId].items[itemIndex].link===menuItemURL&&this.menus[menuId].items.splice(itemIndex,1);return this.menus[menuId]},this.removeSubMenuItem=function(menuId,submenuItemURL){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)for(var subitemIndex in this.menus[menuId].items[itemIndex].items)this.menus[menuId].items[itemIndex].items[subitemIndex].link===submenuItemURL&&this.menus[menuId].items[itemIndex].items.splice(subitemIndex,1);return this.menus[menuId]},this.addMenu("topbar")}]),angular.module("osteopathy").config(["$stateProvider",function($stateProvider){$stateProvider.state("osteopathy",{url:"/osteopathie",templateUrl:"modules/osteopathy/views/osteopathy.client.view.html"})}]),angular.module("osteopathy").controller("OsteopathyController",["$scope",function($scope){}]),angular.module("planning").config(["$stateProvider",function($stateProvider){$stateProvider.state("planning",{url:"/planning?name",templateUrl:"modules/planning/views/planning.client.view.html"})}]),angular.module("planning").controller("PlanningController",["$scope","$state","$http","$window",function($scope,$state,$http,$window){$scope.search={},$scope.coaches=[],$scope.categories=[],$state.params.name&&($scope.search.name=$state.params.name),$http.get("/api/planning").then(function(response){$scope.planning=response.data;for(var i=1;i<$scope.planning.length;i++)for(var classIndex=0;classIndex<$scope.planning[i].classes.length;classIndex++){var coach=$scope.planning[i].classes[classIndex].coach,category=$scope.planning[i].classes[classIndex].category;-1===$scope.coaches.indexOf(coach)&&$scope.coaches.push(coach),-1===$scope.categories.indexOf(category)&&$scope.categories.push(category)}$scope.coaches.sort()}),$scope.$watch("search",function(){for(var key in $scope.search)$scope.search[key]||delete $scope.search[key]},!0);var getCurrentDate=function(){var today=new Date,dd=today.getDate(),mm=today.getMonth()+1,yyyy=today.getFullYear();return 10>dd&&(dd="0"+dd),10>mm&&(mm="0"+mm),today=yyyy+"-"+mm+"-"+dd};$scope.downloadPlanning=function(){var tmpSearch=$scope.search;$scope.search={},$window.html2canvas($window.$(".planning.table"),{onrendered:function(canvas){var img=canvas.toDataURL("image/png").replace("image/png","image/octet-stream"),downloadLink=document.createElement("a");downloadLink.href=img,downloadLink.download=getCurrentDate()+"-MagicFormFAR-planning.png",document.body.appendChild(downloadLink),downloadLink.click(),document.body.removeChild(downloadLink),$scope.search=tmpSearch}})}}]),angular.module("posts").config(["$stateProvider",function($stateProvider){$stateProvider.state("listPosts",{url:"/posts",templateUrl:"modules/posts/views/list-posts.client.view.html"}).state("createPost",{url:"/posts/create",templateUrl:"modules/posts/views/create-post.client.view.html"}).state("viewPost",{url:"/posts/:postId",templateUrl:"modules/posts/views/view-post.client.view.html"}).state("editPost",{url:"/posts/:postId/edit",templateUrl:"modules/posts/views/edit-post.client.view.html"})}]),angular.module("posts").controller("PostsController",["$scope","$stateParams","$location","Authentication","Posts",function($scope,$stateParams,$location,Authentication,Posts){$scope.authentication=Authentication,$scope.create=function(){var post=new Posts({name:this.name,major:this.major,content:this.content});post.$save(function(response){$location.path("posts/"+response._id),$scope.name="",$scope.major=!1,$scope.content=""},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.remove=function(post){if(post){post.$remove();for(var i in $scope.posts)$scope.posts[i]===post&&$scope.posts.splice(i,1)}else $scope.post.$remove(function(){$location.path("posts")})},$scope.update=function(){var post=$scope.post;post.$update(function(){$location.path("posts/"+post._id)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.find=function(){$scope.posts=Posts.query()},$scope.findOne=function(){$scope.post=Posts.get({postId:$stateParams.postId})}}]),angular.module("posts").factory("Posts",["$resource",function($resource){return $resource("posts/:postId",{postId:"@_id"},{update:{method:"PUT"}})}]),angular.module("salle").config(["$stateProvider",function($stateProvider){$stateProvider.state("salle",{url:"/salle",templateUrl:"modules/salle/views/salle.client.view.html"})}]),angular.module("salle").controller("SalleController",["$scope",function($scope){$scope.carouselInterval=5e3,$scope.slides=[{image:"/modules/salle/img/cardio-header.jpg"},{image:"/modules/salle/img/guide-header.jpg"},{image:"/modules/salle/img/9.jpg"},{image:"/modules/salle/img/3.jpg"},{image:"/modules/salle/img/classes-header.jpg"},{image:"/modules/salle/img/11.jpg"},{image:"/modules/salle/img/12.jpg"},{image:"/modules/salle/img/libre-header.jpg"},{image:"/modules/salle/img/6.jpg"},{image:"/modules/salle/img/7.jpg"},{image:"/modules/salle/img/8.jpg"},{image:"/modules/salle/img/13.JPG"},{image:"/modules/salle/img/freedom.jpg"},{image:"/modules/salle/img/freedom-header.jpg"}]}]),angular.module("salle").directive("disableAnimation",["$animate",function($animate){return{restrict:"A",link:function($scope,$element,$attrs){$attrs.$observe("disableAnimation",function(value){$animate.enabled(!value,$element)})}}}]),angular.module("salle").directive("roomRow",["$window",function($window){return{restrict:"EA",transclude:!0,scope:{id:"@"},template:'<div ng-transclude="" ng-click="toggle();"></div>',link:function($scope){var $=$window.$;$scope.toggle=function(){angular.element("html, body").animate({scrollTop:$("#"+$scope.id).offset().top},1e3)}}}}]),angular.module("users").config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push(["$q","$location","Authentication",function($q,$location,Authentication){return{responseError:function(rejection){switch(rejection.status){case 401:Authentication.user=null,$location.path("signin");break;case 403:}return $q.reject(rejection)}}}])}]),angular.module("users").config(["$stateProvider",function($stateProvider){$stateProvider.state("profile",{url:"/settings/profile",templateUrl:"modules/users/views/settings/edit-profile.client.view.html"}).state("password",{url:"/settings/password",templateUrl:"modules/users/views/settings/change-password.client.view.html"}).state("accounts",{url:"/settings/accounts",templateUrl:"modules/users/views/settings/social-accounts.client.view.html"}).state("signup",{url:"/signup",templateUrl:"modules/users/views/authentication/signup.client.view.html"}).state("signin",{url:"/signin",templateUrl:"modules/users/views/authentication/signin.client.view.html"}).state("forgot",{url:"/password/forgot",templateUrl:"modules/users/views/password/forgot-password.client.view.html"}).state("reset-invlaid",{url:"/password/reset/invalid",templateUrl:"modules/users/views/password/reset-password-invalid.client.view.html"}).state("reset-success",{url:"/password/reset/success",templateUrl:"modules/users/views/password/reset-password-success.client.view.html"}).state("reset",{url:"/password/reset/:token",templateUrl:"modules/users/views/password/reset-password.client.view.html"})}]),angular.module("users").controller("AuthenticationController",["$scope","$http","$location","Authentication",function($scope,$http,$location,Authentication){$scope.authentication=Authentication,$scope.authentication.user&&$location.path("/"),$scope.signup=function(){$http.post("/auth/signup",$scope.credentials).success(function(response){$scope.authentication.user=response,$location.path("/")}).error(function(response){$scope.error=response.message})},$scope.signin=function(){$http.post("/auth/signin",$scope.credentials).success(function(response){$scope.authentication.user=response,$location.path("/")}).error(function(response){$scope.error=response.message})}}]),angular.module("users").controller("PasswordController",["$scope","$stateParams","$http","$location","Authentication",function($scope,$stateParams,$http,$location,Authentication){$scope.authentication=Authentication,$scope.authentication.user&&$location.path("/"),$scope.askForPasswordReset=function(){$scope.success=$scope.error=null,$http.post("/auth/forgot",$scope.credentials).success(function(response){$scope.credentials=null,$scope.success=response.message}).error(function(response){$scope.credentials=null,$scope.error=response.message})},$scope.resetUserPassword=function(){$scope.success=$scope.error=null,$http.post("/auth/reset/"+$stateParams.token,$scope.passwordDetails).success(function(response){$scope.passwordDetails=null,Authentication.user=response,$location.path("/password/reset/success")}).error(function(response){$scope.error=response.message})}}]),angular.module("users").controller("SettingsController",["$scope","$http","$location","Users","Authentication",function($scope,$http,$location,Users,Authentication){$scope.user=Authentication.user,$scope.user||$location.path("/"),$scope.hasConnectedAdditionalSocialAccounts=function(provider){for(var i in $scope.user.additionalProvidersData)return!0;return!1},$scope.isConnectedSocialAccount=function(provider){return $scope.user.provider===provider||$scope.user.additionalProvidersData&&$scope.user.additionalProvidersData[provider]},$scope.removeUserSocialAccount=function(provider){$scope.success=$scope.error=null,$http["delete"]("/users/accounts",{params:{provider:provider}}).success(function(response){$scope.success=!0,$scope.user=Authentication.user=response}).error(function(response){$scope.error=response.message})},$scope.updateUserProfile=function(isValid){if(isValid){$scope.success=$scope.error=null;var user=new Users($scope.user);user.$update(function(response){$scope.success=!0,Authentication.user=response},function(response){$scope.error=response.data.message})}else $scope.submitted=!0},$scope.changeUserPassword=function(){$scope.success=$scope.error=null,$http.post("/users/password",$scope.passwordDetails).success(function(response){$scope.success=!0,$scope.passwordDetails=null}).error(function(response){$scope.error=response.message})}}]),angular.module("users").factory("Authentication",[function(){var _this=this;return _this._data={user:window.user},_this._data}]),angular.module("users").factory("Users",["$resource",function($resource){return $resource("users",{},{update:{method:"PUT"}})}]);